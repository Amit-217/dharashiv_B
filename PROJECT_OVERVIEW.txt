================================================================================
                        DHARASHIV LOKSABHA - BACKEND API
================================================================================

1. PROJECT OVERVIEW
-------------------
This project is a Complaint Management System built for the Dharashiv region. 
It facilitates the registration of citizen complaints, automatic routing to the 
correct administrative office (SubDepartment) based on location (Village) and 
category (Department), and tracking of complaint status.

2. TECHNOLOGY STACK
-------------------
- Runtime: Node.js
- Framework: Express.js
- Database: MongoDB (Mongoose ODM)
- Authentication: JWT (JSON Web Tokens)
- Documentation: Swagger (OpenAPI 3.0)
- File Uploads: Multer

3. KEY FEATURES
---------------
A. Authentication & User Management
   - Volunteers (AppUsers) register with phone numbers.
   - Secure Login with JWT Access & Refresh Tokens.
   - Password Reset via Secret Question/Answer.

B. Administrative Hierarchy
   - Departments: Top-level categories (e.g., "Health", "Police").
   - Talukas: Administrative blocks (e.g., "Lohara", "Tuljapur").
   - Villages: Lowest location units mapped to Talukas.
   - SubDepartments: Actual offices (e.g., "PHC Makani") mapped to a Department.

C. Smart Routing (The Core Feature)
   - "DeptVillageMap" entity links a Village to a specific SubDepartment for a 
     given Department.
   - Feature: When a complaint is filed for "Health" in "Makani" village, the 
     system automatically assigns it to "PHC Makani".

D. Complaint Management
   - Citizens (Complainers) are registered first.
   - Complaints support Title, Description, and Multimedia (Images/Videos).
   - Custom ID Generation: e.g., "CMP-0026-0003-002" (Year-AppUser-Seq).
   - Public Tracking: Anyone can track status using the Complaint ID.
   - Internal Tracking: Volunteers can see complaints they filed.

4. FOLDER STRUCTURE (src/)
--------------------------
- /controllers  : Logic handlers (createComplaint, registerUser, etc.).
- /models       : Mongoose Schemas (AppUser, Complaint, Department, etc.).
- /routes       : API Route definitions (mapped to controllers).
- /middlewares  : Auth verification, File Upload handling.
- /swagger      : API Documentation files (separated by route).
- /utils        : Helpers e.g., Custom ID Generator (`generateIds.js`).
- /scripts      : automated tests (test_workflow.js).
- /uploads      : Storage for uploaded complaint media.

5. API DOCUMENTATION
--------------------
The project includes fully interactive Swagger documentation.
URL: http://localhost:4000/api-docs

Key Endpoints:
- Auth       : /api/auth/refresh
- AppUsers   : /api/appUsers/register, /api/appUsers/login
- Departments: /api/departments/create, /api/departments/all
- Mappings   : /api/mappings/create, /api/mappings/search
- Complaints : /api/complaints (POST - Multipart), /api/complaints/track/:id

6. HOW TO RUN
-------------
1. Install Dependencies:
   npm install

2. Start Development Server:
   npm run dev

3. Run Tests:
   node src/scripts/test_workflow.js

================================================================================
